(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};brocksock.AnimationManager=function(){function t(t){var n,r,i,s=this;this.el=t,this.doublePlay=e(this.doublePlay,this),this.play=e(this.play,this),this.stop=e(this.stop,this),this.pause=e(this.pause,this),this.reverse=e(this.reverse,this),this.doubleReverse=e(this.doubleReverse,this),this.replay=e(this.replay,this),this.updateAnimation=e(this.updateAnimation,this),this.start=e(this.start,this),this.$el=$(this.el),this.animationCache={},i=brocksock.animation;for(n in i)r=i[n],this.animationCache[n]={animation:r.animation(),xCoord:r.xCoord,bgClass:r.bgClass};this.currentAnimation=this.animationCache.animation1.animation,brocksock.utils.pubsub.subscribe("scene-change",this.updateAnimation),$(".replay",this.$el).click(function(){return s.replay()}),$(".doubleReverse",this.$el).click(function(){return s.doubleReverse()}),$(".reverse",this.$el).click(function(){return s.reverse()}),$(".pause",this.$el).click(function(){return s.pause()}),$(".stop",this.$el).click(function(){return s.stop()}),$(".play",this.$el).click(function(){return s.play()}),$(".doublePlay",this.$el).click(function(){return s.doublePlay()})}return t.prototype.start=function(){var e,t=this;return e=new TimelineLite,e.set(".triangle",{scale:0,opacity:0}),e.add("start","+=1"),e.to(".triangle",3,{scale:1,opacity:1,rotationX:330}),e.set(".triangle",{rotationX:-30}),e.add(function(){return t.play()})},t.prototype.updateAnimation=function(e,t){var n,r,i=this;return this.stop(),n=this.animationCache[t],this.currentAnimation=n.animation,r=new TimelineLite,r.to(".triangle",2,{rotationX:n.xCoord}),r.to("body",2,{className:n.bgClass},0),r.call(function(){return i.play()})},t.prototype.replay=function(){return this.currentAnimation.timeScale(1),this.currentAnimation.play(0)},t.prototype.doubleReverse=function(){return this.currentAnimation.timeScale(4),this.currentAnimation.progress()===0?this.currentAnimation.reverse(0):this.currentAnimation.reverse()},t.prototype.reverse=function(){return this.currentAnimation.timeScale(1),this.currentAnimation.progress()===0?this.currentAnimation.reverse(0):this.currentAnimation.reverse()},t.prototype.pause=function(){return this.currentAnimation.pause()},t.prototype.stop=function(){return this.currentAnimation.pause(0)},t.prototype.play=function(){return this.currentAnimation.timeScale(1),this.currentAnimation.progress()===1?this.currentAnimation.play(0):this.currentAnimation.play()},t.prototype.doublePlay=function(){return this.currentAnimation.timeScale(4),this.currentAnimation.progress()===1?this.currentAnimation.play(0):this.currentAnimation.play()},t}()}).call(this);